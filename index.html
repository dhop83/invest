<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Money Well - Lifetime Investment Game</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
    }
    body {
      min-height: 100vh;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .game-container {
      background: #fff;
      border-radius: 22px;
      box-shadow: 0 8px 32px rgba(102,126,234,0.15);
      max-width: 560px;
      width: 100%;
      padding: 34px 24px 20px 24px;
      margin: 32px 0;
      min-height: 600px;
      display: flex;
      flex-direction: column;
      align-items: stretch;
      justify-content: flex-start;
    }
    .header {
      text-align: center;
      margin-bottom: 18px;
    }
    .header .logo {
      font-size: 2.2em;
      font-weight: bold;
      color: #667eea;
      margin-bottom: 0;
    }
    .header .subtitle {
      color: #764ba2;
      font-size: 1.2em;
      margin-top: 4px;
      margin-bottom: 0;
      font-weight: 500;
    }
    .stats-row {
      display: flex;
      justify-content: space-between;
      margin: 18px 0 12px 0;
      gap: 8px;
    }
    .stat-box {
      flex: 1;
      background: #f0f4ff;
      border-radius: 10px;
      text-align: center;
      padding: 10px 0 6px 0;
      margin: 0 2px;
    }
    .stat-label {
      color: #667eea;
      font-size: 0.9em;
      margin-bottom: 2px;
    }
    .stat-value {
      font-size: 1.2em;
      font-weight: bold;
      color: #222;
    }
    .stage-bar {
      background: #e1e8ff;
      border-radius: 8px;
      height: 12px;
      margin: 10px 0 18px 0;
      position: relative;
      overflow: hidden;
    }
    .stage-fill {
      background: linear-gradient(90deg, #667eea, #764ba2);
      height: 100%;
      border-radius: 8px;
      transition: width 0.4s;
    }
    .risk-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 10px;
    }
    .risk-btns {
      display: flex;
      gap: 7px;
    }
    .risk-btn {
      border: none;
      border-radius: 16px;
      font-size: 0.95em;
      padding: 5px 14px;
      cursor: pointer;
      background: #f0f4ff;
      color: #667eea;
      font-weight: 500;
      transition: background 0.2s, color 0.2s;
    }
    .risk-btn.selected, .risk-btn:hover {
      background: #667eea;
      color: #fff;
    }
    .desc {
      font-size: 0.95em;
      color: #555;
      margin-bottom: 12px;
    }
    .advance-btn {
      background: linear-gradient(90deg, #667eea, #764ba2);
      color: #fff;
      border: none;
      border-radius: 22px;
      padding: 14px 0;
      font-size: 1.15em;
      font-weight: 600;
      margin-top: 14px;
      margin-bottom: 4px;
      cursor: pointer;
      transition: background 0.2s;
    }
    .advance-btn:disabled {
      background: #ccd3f7;
      color: #888;
      cursor: not-allowed;
    }
    .life-event {
      background: #f8f9ff;
      border-left: 5px solid #667eea;
      border-radius: 12px;
      padding: 18px 14px;
      margin: 18px 0;
    }
    .life-event-title {
      color: #667eea;
      font-size: 1.15em;
      font-weight: bold;
      margin-bottom: 7px;
    }
    .life-event-desc {
      color: #444;
      margin-bottom: 12px;
    }
    .event-choice {
      display: block;
      width: 100%;
      background: #fff;
      border: 2px solid #e1e8ff;
      border-radius: 8px;
      color: #333;
      font-size: 1em;
      padding: 11px 10px;
      margin-bottom: 10px;
      text-align: left;
      cursor: pointer;
      transition: border 0.2s, background 0.2s;
    }
    .event-choice:hover {
      border-color: #667eea;
      background: #f0f4ff;
    }
    .event-lesson {
      color: #764ba2;
      font-size: 0.95em;
      margin-top: 2px;
      margin-bottom: 0;
    }
    .summary {
      margin-top: 20px;
      background: #f8f9ff;
      border-radius: 12px;
      padding: 18px 18px 12px 18px;
      border-left: 5px solid #667eea;
    }
    .summary-title {
      color: #764ba2;
      font-size: 1.3em;
      font-weight: bold;
      margin-bottom: 8px;
      text-align: center;
    }
    .summary-metric {
      font-size: 1.1em;
      margin: 6px 0;
    }
    .summary-lessons {
      margin: 12px 0 0 0;
    }
    .lesson-box {
      background: #e1e8ff;
      border-radius: 8px;
      padding: 8px 10px;
      font-size: 0.98em;
      margin-bottom: 7px;
      color: #333;
    }
    .play-again-btn {
      background: #667eea;
      color: #fff;
      border: none;
      border-radius: 18px;
      padding: 12px 0;
      font-size: 1.1em;
      font-weight: bold;
      margin: 20px 0 0 0;
      width: 100%;
      cursor: pointer;
      transition: background 0.2s;
    }
    .play-again-btn:hover {
      background: #764ba2;
    }
    .copyright {
      text-align: center;
      font-size: 0.97em;
      color: #667eea;
      opacity: 0.7;
      margin-top: 20px;
      margin-bottom: 0;
      letter-spacing: 0.03em;
    }
    @media (max-width: 600px) {
      .game-container { padding: 16px 4px; }
      .header .logo { font-size: 1.3em; }
      .header .subtitle { font-size: 1em; }
      .stat-box { font-size: 0.95em; padding: 7px 0 5px 0;}
      .summary-title { font-size: 1em;}
      .summary-metric { font-size: 1em;}
    }
  </style>
</head>
<body>
  <div class="game-container" id="game"></div>
  <div class="copyright">Â© 2025 Use Money Well. All rights reserved.</div>
  <script>
    // --- Branding and Config ---
    const riskProfiles = {
      conservative: {
        name: "Conservative",
        avgReturn: 0.05,
        volatility: 0.08,
        desc: "Lower risk, steady growth"
      },
      moderate: {
        name: "Moderate",
        avgReturn: 0.08,
        volatility: 0.15,
        desc: "Balanced risk and reward"
      },
      aggressive: {
        name: "Aggressive",
        avgReturn: 0.12,
        volatility: 0.25,
        desc: "Higher risk, higher potential"
      }
    };
    const lifeStages = [
      { name: "Early Career", range: [22, 35] },
      { name: "Mid Career", range: [36, 50] },
      { name: "Peak Earning", range: [51, 60] },
      { name: "Pre-Retirement", range: [61, 65] },
      { name: "Retirement", range: [66, 85] }
    ];
    const lifeEvents = [
      {
        age: 28,
        title: "Getting Married",
        desc: "Wedding costs $25,000. How do you handle this?",
        options: [
          { text: "Withdraw from investments", impact: -25000, lesson: "Early withdrawal reduces compound growth" },
          { text: "Take a loan, keep investing", impact: -5000, lesson: "Debt has cost, but investments keep growing" },
          { text: "Simple ceremony, minimal impact", impact: -5000, lesson: "Living within means preserves wealth" }
        ]
      },
      {
        age: 32,
        title: "Buying First Home",
        desc: "Need $50,000 down payment. What's your strategy?",
        options: [
          { text: "Liquidate 50% of portfolio", impact: "half_portfolio", lesson: "Large withdrawals hurt long-term growth" },
          { text: "Withdraw only what's needed", impact: -50000, lesson: "Targeted withdrawals minimize damage" },
          { text: "Get a loan, keep investments", impact: -10000, lesson: "Leverage can preserve investment growth" }
        ]
      },
      {
        age: 38,
        title: "Starting a Family",
        desc: "Children mean new expenses. How do you adjust?",
        options: [
          { text: "Reduce contributions by 50%", impact: "reduce_contrib_50", lesson: "Reduced contributions slow wealth building" },
          { text: "Switch to conservative investing", impact: "conservative_switch", lesson: "Being too conservative can hurt long-term growth" },
          { text: "Maintain plan, budget elsewhere", impact: 0, lesson: "Staying disciplined maximizes compound growth" }
        ]
      },
      {
        age: 45,
        title: "Job Loss & Career Change",
        desc: "Unemployment for 8 months. How do you survive?",
        options: [
          { text: "Raid retirement savings", impact: -40000, lesson: "Emergency fund would have prevented this loss" },
          { text: "Live on emergency fund", impact: -15000, lesson: "Emergency funds protect investments" },
          { text: "Take any job quickly", impact: -5000, lesson: "Quick action minimizes financial damage" }
        ]
      },
      {
        age: 55,
        title: "Aging Parents",
        desc: "Parents need financial support. What do you do?",
        options: [
          { text: "Withdraw from retirement fund", impact: -60000, lesson: "This impacts your own retirement security" },
          { text: "Adjust current budget", impact: -20000, lesson: "Current sacrifices protect future wealth" },
          { text: "Seek family cost-sharing", impact: -10000, lesson: "Shared responsibility reduces individual burden" }
        ]
      }
    ];

    // --- State ---
    let state = {
      age: 22,
      portfolio: 10000,
      risk: "moderate",
      stage: 0,
      year: 2024,
      totalContrib: 10000,
      lifeEvents: [],
      gameOver: false,
      reducedContrib: false,
      showSummary: false
    };

    // --- Logic ---
    function getStage(age) {
      for (let i = 0; i < lifeStages.length; ++i) {
        if (age >= lifeStages[i].range[0] && age <= lifeStages[i].range[1]) return i;
      }
      return lifeStages.length - 1;
    }
    function calcGrowth(portfolio, risk, age, reducedContrib) {
      const profile = riskProfiles[risk];
      const rand = (Math.random() - 0.5) * profile.volatility * 2;
      const marketReturn = profile.avgReturn + rand;
      let contrib = 6000;
      if (age >= 36 && age <= 50) contrib = 12000;
      if (age >= 51 && age <= 60) contrib = 15000;
      if (age >= 61) contrib = 0;
      if (reducedContrib) contrib = Math.floor(contrib / 2);
      const growth = portfolio * marketReturn;
      return { growth, contrib, marketReturn, newTotal: portfolio + growth + contrib };
    }

    function render() {
      const game = document.getElementById('game');
      if (state.showSummary) {
        renderSummary(game);
        return;
      }
      // Check for life event
      const event = lifeEvents.find(e => e.age === state.age);
      if (event && !state.lifeEvents.some(l => l.age === event.age)) {
        renderLifeEvent(game, event);
        return;
      }
      // Main game screen
      game.innerHTML = `
        <div class="header">
          <div class="logo">ð° Money Well</div>
          <div class="subtitle">Lifetime Investment Game</div>
        </div>
        <div class="stats-row">
          <div class="stat-box">
            <div class="stat-label">Age</div>
            <div class="stat-value">${state.age}</div>
          </div>
          <div class="stat-box">
            <div class="stat-label">Portfolio</div>
            <div class="stat-value" style="color:#2e7d32;">$${Math.round(state.portfolio).toLocaleString()}</div>
          </div>
          <div class="stat-box">
            <div class="stat-label">Risk</div>
            <div class="stat-value">${riskProfiles[state.risk].name}</div>
          </div>
          <div class="stat-box">
            <div class="stat-label">Year</div>
            <div class="stat-value">${state.year}</div>
          </div>
        </div>
        <div style="margin-bottom:2px;font-size:0.95em;">
          <b>Stage:</b> ${lifeStages[state.stage].name}
        </div>
        <div class="stage-bar">
          <div class="stage-fill" style="width:${((state.age-22)/(85-22))*100}%;"></div>
        </div>
        <div class="risk-row">
          <span style="font-size:0.95em;font-weight:500;">Risk Profile:</span>
          <div class="risk-btns">
            ${Object.keys(riskProfiles).map(r => `
              <button class="risk-btn${state.risk===r?' selected':''}" onclick="setRisk('${r}')">${riskProfiles[r].name}</button>
            `).join('')}
          </div>
        </div>
        <div class="desc">${riskProfiles[state.risk].desc}</div>
        <button class="advance-btn" onclick="advanceYear()" ${state.gameOver?'disabled':''}>
          Advance to Next Year
        </button>
      `;
    }

    function renderLifeEvent(game, event) {
      game.innerHTML = `
        <div class="life-event">
          <div class="life-event-title">Age ${state.age}: ${event.title}</div>
          <div class="life-event-desc">${event.desc}</div>
          ${event.options.map((opt,i) => `
            <button class="event-choice" onclick="chooseEvent(${event.age},${i})">
              ${opt.text}
              <div class="event-lesson">${opt.lesson}</div>
            </button>
          `).join('')}
        </div>
      `;
    }

    function renderSummary(game) {
      const roi = ((state.portfolio - state.totalContrib)/state.totalContrib*100).toFixed(1);
      let rating = '';
      if (state.portfolio >= 2000000) rating = 'ð Excellent!';
      else if (state.portfolio >= 1000000) rating = 'ð Good!';
      else if (state.portfolio >= 500000) rating = 'ð Fair';
      else rating = 'ð Needs Work';
      game.innerHTML = `
        <div class="summary">
          <div class="summary-title">Your Investment Journey Complete!</div>
          <div class="summary-metric"><b>Final Portfolio:</b> <span style="color:#2e7d32;font-size:1.15em;">$${Math.round(state.portfolio).toLocaleString()}</span></div>
          <div class="summary-metric"><b>Total Contributions:</b> $${state.totalContrib.toLocaleString()}</div>
          <div class="summary-metric"><b>Investment Growth:</b> $${Math.round(state.portfolio-state.totalContrib).toLocaleString()}</div>
          <div class="summary-metric"><b>Return on Investment:</b> <span style="color:#667eea;">${roi}%</span></div>
          <div class="summary-metric"><b>Performance:</b> <span style="color:#764ba2;">${rating}</span></div>
          <div class="summary-lessons">
            <div style="margin:12px 0 6px 0;font-weight:bold;">Life Lessons:</div>
            ${state.lifeEvents.map(ev => `
              <div class="lesson-box">
                <b>Age ${ev.age}: ${ev.event}</b><br>
                <span style="color:#667eea;">Choice:</span> ${ev.choice}<br>
                <span style="color:#764ba2;">ð¡ ${ev.lesson}</span>
              </div>
            `).join('')}
          </div>
          <div style="margin:14px 0 0 0;font-weight:bold;">Key Principles:</div>
          <ul style="font-size:0.97em;line-height:1.6;margin:8px 0 0 0;">
            <li>Start Early: Compound growth is most powerful over long periods</li>
            <li>Stay Consistent: Regular contributions build wealth steadily</li>
            <li>Manage Risk by Age: More aggressive when young, conservative near retirement</li>
            <li>Emergency Fund: Protects investments from unexpected expenses</li>
            <li>Avoid Panic: Market volatility is normal, stay the course</li>
            <li>Diversification: Don't put all eggs in one basket</li>
          </ul>
          <button class="play-again-btn" onclick="restartGame()">Play Again</button>
        </div>
      `;
    }

    // --- Event Handlers ---
    function setRisk(risk) {
      state.risk = risk;
      render();
    }
    function advanceYear() {
      if (state.gameOver) return;
      const growth = calcGrowth(state.portfolio, state.risk, state.age+1, state.reducedContrib);
      state.portfolio += growth.growth + growth.contrib;
      state.totalContrib += growth.contrib;
      state.age += 1;
      state.year += 1;
      state.stage = getStage(state.age);
      if (state.age >= 85) {
        state.gameOver = true;
        setTimeout(() => { state.showSummary = true; render(); }, 700);
      } else {
        render();
      }
    }
    function chooseEvent(age, optIdx) {
      const event = lifeEvents.find(e => e.age === age);
      const opt = event.options[optIdx];
      // Apply impact
      if (typeof opt.impact === "number") {
        state.portfolio += opt.impact;
      } else if (opt.impact === "reduce_contrib_50") {
        state.reducedContrib = true;
      } else if (opt.impact === "conservative_switch") {
        state.risk = "conservative";
      } else if (opt.impact === "half_portfolio") {
        state.portfolio = state.portfolio / 2;
      }
      state.lifeEvents.push({
        age: age,
        event: event.title,
        choice: opt.text,
        lesson: opt.lesson
      });
      render();
    }
    function restartGame() {
      state = {
        age: 22,
        portfolio: 10000,
        risk: "moderate",
        stage: 0,
        year: 2024,
        totalContrib: 10000,
        lifeEvents: [],
        gameOver: false,
        reducedContrib: false,
        showSummary: false
      };
      render();
    }

    // Expose for inline handlers
    window.setRisk = setRisk;
    window.advanceYear = advanceYear;
    window.chooseEvent = chooseEvent;
    window.restartGame = restartGame;

    // Initial Render
    render();
  </script>
</body>
</html>
